<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SDDBD5MDFH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-SDDBD5MDFH');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rumah Penghulu Abu Seman - Pillars (Tiang Seri)</title>
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Model Viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <!-- Language Selector -->
        <div class="language-selector">
            <button class="lang-btn active" onclick="changeLanguage('en')" data-lang="en">
                <i class="fas fa-globe"></i> English
            </button>
            <button class="lang-btn" onclick="changeLanguage('ms')" data-lang="ms">
                <i class="fas fa-globe"></i> Melayu
            </button>
            <button class="lang-btn" onclick="changeLanguage('zh')" data-lang="zh">
                <i class="fas fa-globe"></i> 中文
            </button>
        </div>
        
        <div class="header-icon">
            <i class="fas fa-columns"></i>
        </div>
        <h1 data-translate="header-title">Rumah Penghulu Abu Seman</h1>
        <p class="subtitle" data-translate="header-subtitle">Pillars (Tiang Seri) - Traditional Malay Architecture</p>
    </header>
    
    <!-- Main Content -->
    <div class="container">
        <div class="content-wrapper">
            
            <!-- Description Section -->
            <div class="card reveal">
                <h2 class="section-title">
                    <i class="fas fa-book-open"></i>
                    <span data-translate="section-description">Description</span>
                </h2>
                <p class="description-text" data-translate="description-text">
                    The pillars (<em>tiang seri</em>) of Rumah Penghulu Abu Seman illustrate sophisticated traditional Malay building technology. The structure primarily uses prefabricated timber elements joined together without nails. This meticulous construction method allowed the house to be easily deconstructed piece by piece and moved to a new location. This ancient technology allowed Rumah Penghulu Abu Seman to be dismantled, transported from Kedah, and rebuilt in Kuala Lumpur between 1996 and 1997.
                </p>
            </div>
            
            <!-- Did You Know Fact Box -->
            <div class="card fact-box reveal">
                <h2 class="fact-title">
                    <i class="fas fa-lightbulb"></i>
                    <span data-translate="fact-title">Did You Know?</span>
                </h2>
                <div class="fact-content">
                    <p class="fact-label">
                        <i class="fas fa-wind"></i>
                        <span data-translate="fact-label">Climatic Design:</span>
                    </p>
                    <p data-translate="fact-text">
                        The pillars elevate the house structure, contributing to the raised floor level which is a key climatic design principle of traditional Malay houses. Elevated floors enable cross ventilation beneath the floor, helping to cool the structure and materials.
                    </p>
                </div>
            </div>
            
            <!-- Video Section -->
            <div class="card video-section reveal">
                <h2 class="section-title">
                    <i class="fas fa-video"></i>
                    <span data-translate="video-title">3D Construction Model</span>
                </h2>
                <div class="video-container">
                    <video controls preload="metadata">
                        <source src="public/rumah-penghulu-abu-seman-3d.mp4" type="video/mp4">
                        <span data-translate="video-error">Your browser does not support the video tag.</span>
                    </video>
                </div>
                <p class="video-description">
                    <i class="fas fa-info-circle"></i>
                    <span data-translate="video-description">Watch this detailed 3D construction animation of Rumah Penghulu Abu Seman from Badan Warisan Malaysia</span>
                </p>
            </div>
            
            <!-- Action Buttons Section -->
            <div class="action-section">
                <!-- 3D Model Card -->
                <div class="action-card model-card reveal">
                    <i class="fas fa-cube action-icon"></i>
                    <h3 class="action-title" data-translate="model-title">View 3D Model</h3>
                    <p class="action-description" data-translate="model-description">
                        Explore the intricate details of the traditional pillar in an interactive 3D environment
                    </p>
                    <button onclick="openModelViewer()" class="btn btn-primary">
                        <i class="fas fa-arrow-right"></i>
                        <span data-translate="model-button">Explore More</span>
                    </button>
                </div>
                
                <!-- Feedback Form Card -->
                <div class="action-card feedback-card reveal">
                    <i class="fas fa-comment-dots action-icon"></i>
                    <h3 class="action-title" data-translate="feedback-title">Share Your Feedback</h3>
                    <p class="action-description" data-translate="feedback-description">
                        Help us improve by sharing your thoughts and experiences with this cultural heritage
                    </p>
                    <a href="https://docs.google.com/forms/d/16utQ6j-jOOymM-u_OnStW7v8WxXpVo8dsPJca0ePiyQ/edit" 
                       target="_blank" 
                       class="btn btn-primary"
                       onclick="trackClick('feedback')">
                        <i class="fas fa-paper-plane"></i>
                        <span data-translate="feedback-button">Give Feedback</span>
                    </a>
                </div>
                
                <!-- Quiz Card -->
                <div class="action-card quiz-card reveal">
                    <i class="fas fa-brain action-icon"></i>
                    <h3 class="action-title" data-translate="quiz-title">Test Your Knowledge</h3>
                    <p class="action-description" data-translate="quiz-description">
                        Challenge yourself with an interactive quiz about Rumah Penghulu Abu Seman pillars
                    </p>
                    <a href="quiz.html" 
                       class="btn btn-primary"
                       onclick="trackClick('quiz')">
                        <i class="fas fa-play-circle"></i>
                        <span data-translate="quiz-button">Take Quiz</span>
                    </a>
                </div>
            </div>
            
        </div>
    </div>
    
    <!-- 3D Model Modal -->
    <div id="modelModal" class="model-modal">
        <div class="model-modal-content">
            <button class="modal-close" onclick="closeModelViewer()">
                <i class="fas fa-times"></i>
            </button>
            <h2 data-translate="modal-model-title">Pillar Carving Motif - 3D Model</h2>
            <div class="model-viewer-container">
                <model-viewer
                    src="public/pillar_3D_model.glb"
                    alt="A 3D model of the Pillar Carving Motif"
                    camera-controls
                    auto-rotate
                    shadow-intensity="1"
                    style="width: 100%; height: 100%; border: none;"
                ></model-viewer>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <p>
            <span data-translate="footer-text">Preserving Cultural Heritage with</span> <i class="fas fa-heart"></i>
        </p>
        <p style="margin-top: 8px; opacity: 0.7;">
            <i class="fas fa-info-circle"></i> 
            <span data-translate="footer-subtext">Traditional Malay Architecture Education Initiative</span>
        </p>
    </footer>
    
    <!-- JavaScript for Scroll Animations and Translation -->
    <script>
        // Translation data
        const translations = {
            en: {
                'header-title': 'Rumah Penghulu Abu Seman',
                'header-subtitle': 'Pillars (Tiang Seri) - Traditional Malay Architecture',
                'section-description': 'Description',
                'description-text': 'The pillars (<em>tiang seri</em>) of Rumah Penghulu Abu Seman illustrate sophisticated traditional Malay building technology. The structure primarily uses prefabricated timber elements joined together without nails. This meticulous construction method allowed the house to be easily deconstructed piece by piece and moved to a new location. This ancient technology allowed Rumah Penghulu Abu Seman to be dismantled, transported from Kedah, and rebuilt in Kuala Lumpur between 1996 and 1997.',
                'fact-title': 'Did You Know?',
                'fact-label': 'Climatic Design:',
                'fact-text': 'The pillars elevate the house structure, contributing to the raised floor level which is a key climatic design principle of traditional Malay houses. Elevated floors enable cross ventilation beneath the floor, helping to cool the structure and materials.',
                'video-title': '3D Construction Model',
                'video-description': 'Watch this detailed 3D construction animation of Rumah Penghulu Abu Seman from Badan Warisan Malaysia',
                'video-error': 'Your browser does not support the video tag.',
                'model-title': 'View 3D Model',
                'model-description': 'Explore the intricate details of the traditional pillar in an interactive 3D environment',
                'model-button': 'Explore More',
                'feedback-title': 'Share Your Feedback',
                'feedback-description': 'Help us improve by sharing your thoughts and experiences with this cultural heritage',
                'feedback-button': 'Give Feedback',
                'quiz-title': 'Test Your Knowledge',
                'quiz-description': 'Challenge yourself with an interactive quiz about Rumah Penghulu Abu Seman pillars',
                'quiz-button': 'Take Quiz',
                'footer-text': 'Preserving Cultural Heritage with',
                'footer-subtext': 'Traditional Malay Architecture Education Initiative',
                'modal-model-title': 'Pillar Carving Motif - 3D Model'
            },
            ms: {
                'header-title': 'Rumah Penghulu Abu Seman',
                'header-subtitle': 'Tiang Seri - Seni Bina Tradisional Melayu',
                'section-description': 'Penerangan',
                'description-text': 'Tiang (<em>tiang seri</em>) Rumah Penghulu Abu Seman menggambarkan teknologi binaan tradisional Melayu yang canggih. Struktur ini menggunakan elemen kayu siap pasang yang disambung tanpa paku. Kaedah pembinaan yang teliti ini membolehkan rumah dibongkar sekeping demi sekeping dan dipindahkan ke lokasi baru. Teknologi purba ini membolehkan Rumah Penghulu Abu Seman dibongkar, diangkut dari Kedah, dan dibina semula di Kuala Lumpur antara 1996 dan 1997.',
                'fact-title': 'Tahukah Anda?',
                'fact-label': 'Reka Bentuk Iklim:',
                'fact-text': 'Tiang-tiang menaikkan struktur rumah, menyumbang kepada tahap lantai yang tinggi yang merupakan prinsip reka bentuk iklim utama rumah tradisional Melayu. Lantai yang tinggi membolehkan pengudaraan silang di bawah lantai, membantu menyejukkan struktur dan bahan.',
                'video-title': 'Model Pembinaan 3D',
                'video-description': 'Tonton animasi pembinaan 3D Rumah Penghulu Abu Seman yang terperinci dari Badan Warisan Malaysia',
                'video-error': 'Pelayar anda tidak menyokong tag video.',
                'model-title': 'Lihat Model 3D',
                'model-description': 'Terokai butiran rumit tiang tradisional dalam persekitaran 3D interaktif',
                'model-button': 'Terokai Lebih',
                'feedback-title': 'Kongsi Maklum Balas Anda',
                'feedback-description': 'Bantu kami meningkatkan dengan berkongsi pemikiran dan pengalaman anda dengan warisan budaya ini',
                'feedback-button': 'Beri Maklum Balas',
                'quiz-title': 'Uji Pengetahuan Anda',
                'quiz-description': 'Cabari diri anda dengan kuiz interaktif tentang tiang Rumah Penghulu Abu Seman',
                'quiz-button': 'Ambil Kuiz',
                'footer-text': 'Memelihara Warisan Budaya dengan',
                'footer-subtext': 'Inisiatif Pendidikan Seni Bina Tradisional Melayu',
                'modal-model-title': 'Motif Ukiran Tiang - Model 3D'
            },
            zh: {
                'header-title': 'Rumah Penghulu Abu Seman',
                'header-subtitle': '柱子（Tiang Seri）- 传统马来建筑',
                'section-description': '描述',
                'description-text': 'Rumah Penghulu Abu Seman 的柱子（<em>tiang seri</em>）展示了精密的传统马来建筑技术。该结构主要使用预制木材元素，无需钉子即可连接。这种细致的建造方法使房屋能够逐块拆卸并移至新位置。这项古老技术使 Rumah Penghulu Abu Seman 能够在 1996 年至 1997 年间从吉打拆除、运输并在吉隆坡重建。',
                'fact-title': '你知道吗？',
                'fact-label': '气候设计：',
                'fact-text': '柱子抬高了房屋结构，有助于提高地板水平，这是传统马来房屋的关键气候设计原则。抬高的地板可以实现地板下的交叉通风，有助于冷却结构和材料。',
                'video-title': '3D 建筑模型',
                'video-description': '观看 Badan Warisan Malaysia 提供的 Rumah Penghulu Abu Seman 详细 3D 建筑动画',
                'video-error': '您的浏览器不支持视频标签。',
                'model-title': '查看 3D 模型',
                'model-description': '在交互式 3D 环境中探索传统柱子的精细细节',
                'model-button': '探索更多',
                'feedback-title': '分享您的反馈',
                'feedback-description': '通过分享您对这一文化遗产的想法和经验，帮助我们改进',
                'feedback-button': '提供反馈',
                'quiz-title': '测试您的知识',
                'quiz-description': '通过关于 Rumah Penghulu Abu Seman 柱子的互动测验挑战自己',
                'quiz-button': '参加测验',
                'footer-text': '保护文化遗产',
                'footer-subtext': '传统马来建筑教育倡议',
                'modal-model-title': '柱子雕刻图案 - 3D 模型'
            }
        };
        
        // Current language
        let currentLang = 'en';
        
        // Change language function
        function changeLanguage(lang) {
            currentLang = lang;
            
            // Update all translated elements
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    element.innerHTML = translations[lang][key];
                }
            });
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                }
            });
            
            // Save preference to localStorage
            localStorage.setItem('preferredLanguage', lang);
        }
        
        // Load saved language preference on page load
        window.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && translations[savedLang]) {
                changeLanguage(savedLang);
            }
        });
        
        // Scroll reveal animation
        function reveal() {
            const reveals = document.querySelectorAll('.reveal');
            
            reveals.forEach(element => {
                const windowHeight = window.innerHeight;
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;
                
                if (elementTop < windowHeight - elementVisible) {
                    element.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', reveal);
        
        // Initial check on page load
        reveal();
        
        // Smooth scroll behavior
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Analytics Tracking Function
        async function trackClick(buttonType) {
            try {
                await fetch('/api/track-click', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ buttonType })
                });
            } catch (error) {
                console.log('Analytics tracking failed:', error);
                // Fail silently - don't interrupt user experience
            }
        }
        
        // 3D Model Modal Functions
        function openModelViewer() {
            const modal = document.getElementById('modelModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Track 3D model click
            trackClick('3d-model');
        }
        
        function closeModelViewer() {
            const modal = document.getElementById('modelModal');
            modal.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        }
        
        // Close modal when clicking outside the content
        document.getElementById('modelModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModelViewer();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModelViewer();
            }
        });
    </script>
</body>
</html>

